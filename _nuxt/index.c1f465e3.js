import{y as P,G as w,r as h,o as c,b as n,m as $,v as D,u as e,f as r,q as F,s as V,x as C,a as N,e as d,H as b,I as f,j as v,J as j,w as A,l as g,t as x,k as L,F as k,D as B,c as E}from"./entry.6130ca20.js";import{g as T}from"./getMessagesFromError.bead1578.js";import{T as q}from"./Toolbar.eb091e3f.js";const z=["onSubmit"],H=r("label",{for:"create-project-name"},"Project Name",-1),I=["disabled"],M=["disabled"],R={__name:"CreateProjectForm",emits:["success","error"],setup(_,{emit:o}){const s=P(),l=w(),a=h(""),t=h(null),i=()=>t.value.focus(),m=()=>{a.value=""},y=async()=>{try{const u=`${C().public.jwtApi}/projects`,p=await $fetch(u,{method:"post",body:{name:a.value},headers:{Authorization:s.authHeaderValue}});o("success",{project:p,name:a.value}),m()}catch(u){i(),o("error",u)}};return(u,p)=>(c(),n("form",{action:"#",method:"get",onSubmit:V(y,["prevent"])},[H,$(r("input",{id:"create-project-name",ref_key:"nameField",ref:t,"onUpdate:modelValue":p[0]||(p[0]=S=>F(a)?a.value=S:null),type:"text",placeholder:"Project Name",name:"project-name",disabled:!e(l).canCreate},null,8,I),[[D,e(a)]]),r("input",{type:"submit",value:"Create Project",disabled:!e(l).canCreate},null,8,M)],40,z))}},U={class:"flex items-center flex-wrap space-x-4 font-2xl"},Y={key:0,class:"flex-grow flex justify-around"},G={__name:"DeleteProjectForm",props:{id:{type:String,required:!0}},emits:["success","error"],setup(_,{emit:o}){const s=_,l=P(),a=w(),t=h(0),i=async()=>{const u=`${C().public.jwtApi}/projects/${s.id}`;try{await $fetch(u,{method:"delete",headers:{Authorization:l.authHeaderValue}}),a.removeProject(s.id),j.info("Project deleted"),o("success")}catch(p){o("error",p)}},m=()=>{switch(t.value+=1,t.value){case 1:j.warn("Click four more times to permanently delete project.");break;case 4:j.error("Deleting a project is permanent and irreversible!");break;case 5:i();break}},y=()=>{t.value=0};return(u,p)=>(c(),n("div",U,[r("button",{class:"delete-submit",onClick:m}," Delete "),e(t)>0?(c(),n("div",Y,[d(e(f),{icon:"solar:bomb-emoji-bold-duotone",class:b({"text-red-500":e(t)>0,"animate-pulse":!0})},null,8,["class"]),d(e(f),{icon:"solar:bomb-emoji-bold-duotone",class:b({"text-gray-400":e(t)<=1,"text-red-500":e(t)>1,"animate-pulse":e(t)>1})},null,8,["class"]),d(e(f),{icon:"solar:bomb-emoji-bold",class:b({"text-gray-400":e(t)<=2,"text-red-500":e(t)>2,"animate-pulse":e(t)>2})},null,8,["class"]),d(e(f),{icon:"game-icons:spiky-explosion",class:b({"text-gray-400":e(t)<=3,"text-red-500":e(t)>3,"animate-pulse":e(t)>3})},null,8,["class"])])):v("",!0),e(t)>0?(c(),n("button",{key:1,class:"delete-cancel",onClick:y}," Cancel ")):v("",!0)]))}},J=N(G,[["__scopeId","data-v-07a4bd7f"]]),O={class:"shadow-md px-4 border rounded"},K={class:"list-disc"},Q={__name:"ProjectListView",props:{project:{type:Object,required:!0}},setup(_){const o=_,s=h(new Date(o.project.createdAt).toLocaleDateString()),l=h(new Date(o.project.updatedAt).toLocaleDateString());return(a,t)=>{const i=L;return c(),n("div",O,[d(i,{class:"uppercase text-sm font-bold truncate",title:o.project.name,to:`/provider/projects/${o.project.id}`},{default:A(()=>[g(x(o.project.name),1)]),_:1},8,["title","to"]),r("ul",K,[r("li",null,[g("Created "),r("strong",null,x(e(s)),1)]),r("li",null,[g("Updated "),r("strong",null,x(e(l)),1)])]),d(J,{id:o.project.id,class:"mb-4"},null,8,["id"])])}}},W=r("h1",null,"Projects",-1),X={key:0,class:"border border-gray-300 bg-gray-100 rounded shadow-lg p-4 text-center"},Z=r("p",{class:"text-gray-600 italic"},"Create a project to get started",-1),ee=[Z],te=r("h3",null,"Create Project",-1),oe=r("p",null," Projects are what your end users are authenticated to. You should have a different project for each app that you want to have users for. ",-1),re={key:1,class:"font-bold text-red-500"},ne={__name:"index",setup(_){const o=P(),s=w(),l=({project:t,name:i})=>{s.addProject(t),j.info(`Project '${i}' created!`)},a=t=>{j.error(T(t).join(", "))};return(t,i)=>(c(),n(k,null,[d(q,{class:"mb-4","is-projects":""}),W,e(s).projects.length===0?(c(),n("div",X,ee)):v("",!0),(c(!0),n(k,null,B(e(s).projects,m=>(c(),E(Q,{key:m.id,project:m,class:"my-2"},null,8,["project"]))),128)),te,oe,e(s).canCreate?v("",!0):(c(),n("p",re," You've reached your project limit of "+x(e(o).limitProjects),1)),d(R,{onSuccess:l,onError:a})],64))}};export{ne as default};
